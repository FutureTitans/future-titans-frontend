(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[668],{20311:function(t,e,s){Promise.resolve().then(s.bind(s,347))},347:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return b}});var a=s(57437),n=s(2265),r=s(32617),o=s(47625),l=s(77031),c=s(56940),i=s(97059),d=s(62994),u=s(8147),m=s(31699),h=s(75169),g=s(3574),p=s(20407),x=s(23930);let f=["#DC2626","#D97706","#F59E0B","#10B981","#3B82F6","#8B5CF6"];function b(){let[t,e]=(0,n.useState)(null),[s,b]=(0,n.useState)(!0);(0,n.useEffect)(()=>{j()},[]);let j=async()=>{try{let t=await r.SA.getAnalytics();e(t)}catch(t){console.error("Failed to fetch analytics:",t)}finally{b(!1)}};return s?(0,a.jsx)(x.Z,{message:"Loading analytics..."}):t?(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8 gradient-text",children:"Analytics Dashboard"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"font-semibold text-neutral-medium mb-2",children:"Total Students"}),(0,a.jsx)("p",{className:"text-4xl font-bold gradient-text",children:t.totalStudents}),(0,a.jsxs)("p",{className:"text-sm text-neutral-medium mt-2",children:[t.paidStudents," paid (",t.completionRate,"%)"]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"font-semibold text-neutral-medium mb-2",children:"Average SSI"}),(0,a.jsx)("p",{className:"text-4xl font-bold gradient-text",children:Math.round(t.averageSSI)}),(0,a.jsx)("p",{className:"text-sm text-neutral-medium mt-2",children:"Solution-Seeking Index"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"font-semibold text-neutral-medium mb-2",children:"Completion Rate"}),(0,a.jsxs)("p",{className:"text-4xl font-bold gradient-text",children:[t.completionRate,"%"]}),(0,a.jsx)("p",{className:"text-sm text-neutral-medium mt-2",children:"Of total registrations"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-4",children:"SSI Score Distribution"}),(0,a.jsx)(o.h,{width:"100%",height:300,children:(0,a.jsxs)(l.v,{data:t.ssiDistribution||[],children:[(0,a.jsx)(c.q,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),(0,a.jsx)(i.K,{dataKey:"label"}),(0,a.jsx)(d.B,{}),(0,a.jsx)(u.u,{}),(0,a.jsx)(m.$,{dataKey:"count",fill:"#DC2626"})]})})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Submissions by Category"}),(0,a.jsx)(o.h,{width:"100%",height:300,children:(0,a.jsxs)(h.u,{children:[(0,a.jsx)(g.b,{data:t.submissionsByCategory||[],cx:"50%",cy:"50%",labelLine:!1,label:t=>{let{_id:e,count:s}=t;return"".concat(e,": ").concat(s)},outerRadius:80,fill:"#8884d8",dataKey:"count",children:(t.submissionsByCategory||[]).map((t,e)=>(0,a.jsx)(p.b,{fill:f[e%f.length]},"cell-".concat(e)))}),(0,a.jsx)(u.u,{})]})})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Students by Country (Top 10)"}),(0,a.jsx)("div",{className:"space-y-3",children:(t.studentsByCountry||[]).map((e,s)=>{var n;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-dark",children:e._id||"Unknown"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1 ml-4",children:[(0,a.jsx)("div",{className:"flex-1 bg-neutral-light rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-red-gold h-full rounded-full",style:{width:"".concat(e.count/((null===(n=t.studentsByCountry[0])||void 0===n?void 0:n.count)||1)*100,"%")}})}),(0,a.jsx)("span",{className:"font-semibold text-neutral-dark w-12",children:e.count})]})]},s)})})]})]}):(0,a.jsx)("div",{className:"text-center",children:"No data available"})}},23930:function(t,e,s){"use strict";s.d(e,{Z:function(){return n}});var a=s(57437);function n(t){let{size:e="md",message:s="Loading..."}=t;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"".concat({sm:"w-6 h-6",md:"w-12 h-12",lg:"w-16 h-16"}[e]," border-4 border-neutral-light border-t-primary-red rounded-full animate-spin")}),s&&(0,a.jsx)("p",{className:"mt-4 text-neutral-medium",children:s})]})}},32617:function(t,e,s){"use strict";s.d(e,{Gg:function(){return d},I8:function(){return l},SA:function(){return m},Yl:function(){return u},mG:function(){return c},qz:function(){return i}});var a=s(83464),n=s(9818);let r="http://localhost:5006/api",o=a.Z.create({baseURL:r,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(t=>{let e=(0,n.bW)();return e&&(t.headers.Authorization="Bearer ".concat(e)),t},t=>Promise.reject(t)),o.interceptors.response.use(t=>t.data,async t=>{var e,s;let l=t.config;if((null===(e=t.response)||void 0===e?void 0:e.status)===403&&!l._retry){l._retry=!0;let t=(0,n.YV)();if(t)try{let e=await a.Z.post("".concat(r,"/auth/refresh"),{refreshToken:t});return(0,n.uB)(e.data.accessToken),l.headers.Authorization="Bearer ".concat(e.data.accessToken),o(l)}catch(t){return(0,n.H6)(),window.location.href="/login",Promise.reject(t)}}return Promise.reject((null===(s=t.response)||void 0===s?void 0:s.data)||t.message)});let l={signup:t=>o.post("/auth/signup",t),login:t=>o.post("/auth/login",t),refreshToken:t=>o.post("/auth/refresh",{refreshToken:t}),getProfile:()=>o.get("/auth/profile"),updateProfile:t=>o.put("/auth/profile",t)},c={initiatePayment:()=>o.post("/payment/initiate"),verifyPayment:t=>o.post("/payment/verify",t),getPaymentStatus:()=>o.get("/payment/status")},i={getAll:()=>o.get("/modules"),getById:t=>o.get("/modules/".concat(t)),getChapter:(t,e)=>o.get("/modules/".concat(t,"/chapters/").concat(e)),create:t=>o.post("/modules",t),update:(t,e)=>o.put("/modules/".concat(t),e),delete:t=>o.delete("/modules/".concat(t)),publish:t=>o.post("/modules/".concat(t,"/publish")),createChapter:(t,e)=>o.post("/modules/".concat(t,"/chapters"),e),updateChapter:(t,e,s)=>o.put("/modules/".concat(t,"/chapters/").concat(e),s),deleteChapter:(t,e)=>o.delete("/modules/".concat(t,"/chapters/").concat(e)),reorderChapters:(t,e)=>o.post("/modules/".concat(t,"/reorder-chapters"),e)},d={sendMessage:(t,e,s)=>o.post("/chat/".concat(t,"/chapters/").concat(e,"/message"),{message:s}),getChatHistory:(t,e)=>o.get("/chat/".concat(t,"/chapters/").concat(e,"/history")),completeChapter:(t,e)=>o.post("/chat/".concat(t,"/chapters/").concat(e,"/complete")),getSSI:()=>o.get("/chat/ssi"),getReport:()=>o.get("/chat/report"),getStudentChats:t=>o.get("/chat/admin/student/".concat(t,"/chats")),overrideSSI:(t,e)=>o.put("/chat/admin/chat/".concat(t,"/override-ssi"),e),sendGlobalMessage:t=>o.post("/chat/global/message",{message:t}),getGlobalHistory:()=>o.get("/chat/global/history")},u={saveDraft:t=>o.post("/submission/draft",t),submit:t=>o.post("/submission/submit",t,{headers:{"Content-Type":"multipart/form-data"}}),get:()=>o.get("/submission"),update:(t,e)=>o.put("/submission/".concat(t),e),getAll:t=>o.get("/submission/admin/all",{params:t}),getDetails:t=>o.get("/submission/admin/".concat(t)),score:(t,e)=>o.put("/submission/admin/".concat(t,"/score"),e),downloadFile:(t,e)=>o.get("/submission/admin/".concat(t,"/download/").concat(e))},m={getDashboard:()=>o.get("/admin/dashboard"),getStudents:t=>o.get("/admin/students",{params:t}),getStudentDetail:t=>o.get("/admin/students/".concat(t)),updateStudentStatus:(t,e)=>o.put("/admin/students/".concat(t),e),tagStudent:(t,e)=>o.post("/admin/students/".concat(t,"/tag"),e),getAnalytics:()=>o.get("/admin/analytics"),exportStudents:()=>o.get("/admin/export/students"),getSchoolSlugs:()=>o.get("/admin/slugs"),createSchoolSlug:t=>o.post("/admin/slugs",t),updateSchoolSlug:(t,e)=>o.put("/admin/slugs/".concat(t),e),deleteSchoolSlug:t=>o.delete("/admin/slugs/".concat(t)),getStudentsBySlug:t=>o.get("/admin/slugs/".concat(t,"/students"))}},9818:function(t,e,s){"use strict";s.d(e,{$8:function(){return g},GJ:function(){return p},H6:function(){return h},PR:function(){return u},YV:function(){return i},av:function(){return m},bW:function(){return l},dE:function(){return x},uB:function(){return c},zI:function(){return d}});var a=s(64131);let n="future_titans_token",r="future_titans_refresh_token",o="future_titans_user",l=()=>a.Z.get(n)||localStorage.getItem(n),c=t=>{a.Z.set(n,t,{expires:.625}),localStorage.setItem(n,t)},i=()=>a.Z.get(r)||localStorage.getItem(r),d=t=>{a.Z.set(r,t,{expires:7}),localStorage.setItem(r,t)},u=()=>{let t=localStorage.getItem(o);return t?JSON.parse(t):null},m=t=>{localStorage.setItem(o,JSON.stringify(t))},h=()=>{a.Z.remove(n),localStorage.removeItem(n),localStorage.removeItem(r),localStorage.removeItem(o),a.Z.remove(r)},g=()=>!!l(),p=()=>{let t=u();return(null==t?void 0:t.role)==="admin"},x=()=>{let t=u();return(null==t?void 0:t.role)==="student"}}},function(t){t.O(0,[825,611,971,117,744],function(){return t(t.s=20311)}),_N_E=t.O()}]);