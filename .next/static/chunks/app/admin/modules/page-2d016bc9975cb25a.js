(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{53723:function(e,t,a){Promise.resolve().then(a.bind(a,88877))},88877:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var s=a(57437),r=a(2265),n=a(27648),i=a(32617);let l=(0,a(8301).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var o=a(16325),d=a(15048),c=a(6850),u=a(53739),m=a(23930);function p(){let[e,t]=(0,r.useState)([]),[a,p]=(0,r.useState)(!0),[h,g]=(0,r.useState)(!1),[f,x]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null),[v,j]=(0,r.useState)({title:"",description:"",difficulty:"beginner",estimatedCompletionTime:60,aiQuestionsPerChapter:10});(0,r.useEffect)(()=>{N()},[]);let N=async()=>{try{p(!0);let e=await i.qz.getAll();console.log("Fetched modules:",e),t(Array.isArray(e)?e:[])}catch(e){console.error("Failed to fetch modules:",e),t([])}finally{p(!1),x(!1)}},C=async()=>{x(!0),await N()},S=async e=>{if(e.preventDefault(),!v.title||!v.description){alert("Please fill in all required fields");return}try{if(b){console.log("Updating module with data:",v);let e=await i.qz.update(b._id,{...v,aiInteractionEnabled:!0});console.log("Module updated:",e),alert("✅ Module updated successfully!")}else{console.log("Creating module with data:",v);let e=await i.qz.create({...v,aiInteractionEnabled:!0});console.log("Module created:",e),alert("✅ Module created successfully!")}j({title:"",description:"",difficulty:"beginner",estimatedCompletionTime:60,aiQuestionsPerChapter:10}),y(null),g(!1),setTimeout(()=>{N()},1e3)}catch(e){console.error("Failed to save module:",e),alert("❌ Failed to save module: "+(e.message||"Unknown error"))}},k=async e=>{if(confirm("Are you sure you want to delete this module?"))try{await i.qz.delete(e),N()}catch(e){console.error("Failed to delete module:",e)}};return a?(0,s.jsx)(m.Z,{message:"Loading modules..."}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold gradient-text",children:"Module Management"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("button",{onClick:C,disabled:f,className:"flex items-center gap-2 bg-neutral-light text-neutral-dark px-4 py-2 rounded-lg hover:bg-neutral-border transition disabled:opacity-50",children:[(0,s.jsx)(l,{className:"w-5 h-5 ".concat(f?"animate-spin":"")}),"Refresh"]}),(0,s.jsxs)("button",{onClick:()=>{y(null),j({title:"",description:"",difficulty:"beginner",estimatedCompletionTime:60,aiQuestionsPerChapter:10}),g(!h)},className:"flex items-center gap-2 bg-primary-red text-white px-4 py-2 rounded-lg hover:bg-primary-darkRed transition",children:[(0,s.jsx)(o.Z,{className:"w-5 h-5"}),b?"Edit Module":"Create Module"]})]})]}),h&&(0,s.jsxs)("div",{className:"card mb-8",children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-4",children:b?"Edit Module":"Create New Module"}),(0,s.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Module Title",value:v.title,onChange:e=>j({...v,title:e.target.value}),className:"w-full px-4 py-2 border border-neutral-border rounded-lg",required:!0}),(0,s.jsx)("textarea",{placeholder:"Module Description",value:v.description,onChange:e=>j({...v,description:e.target.value}),className:"w-full px-4 py-2 border border-neutral-border rounded-lg h-24",required:!0}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("select",{value:v.difficulty,onChange:e=>j({...v,difficulty:e.target.value}),className:"px-4 py-2 border border-neutral-border rounded-lg",children:[(0,s.jsx)("option",{value:"beginner",children:"Beginner"}),(0,s.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,s.jsx)("option",{value:"advanced",children:"Advanced"})]}),(0,s.jsx)("input",{type:"number",placeholder:"Est. Completion Time (minutes)",value:v.estimatedCompletionTime,onChange:e=>j({...v,estimatedCompletionTime:parseInt(e.target.value)}),className:"px-4 py-2 border border-neutral-border rounded-lg"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Default AI Questions per Chapter",(0,s.jsx)("span",{className:"block text-xs text-neutral-medium",children:"How many SURGE-style questions the AI should ask after each chapter (default 10)."})]}),(0,s.jsx)("input",{type:"number",min:1,max:20,value:v.aiQuestionsPerChapter,onChange:e=>j({...v,aiQuestionsPerChapter:parseInt(e.target.value||"10",10)}),className:"w-full px-4 py-2 border border-neutral-border rounded-lg"})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"submit",className:"flex-1 bg-primary-red text-white px-4 py-2 rounded-lg hover:bg-primary-darkRed transition",children:b?"Save Changes":"Create Module"}),(0,s.jsx)("button",{type:"button",onClick:()=>{g(!1),y(null)},className:"flex-1 bg-neutral-light text-neutral-dark px-4 py-2 rounded-lg hover:bg-neutral-border transition",children:"Cancel"})]})]})]}),(0,s.jsx)("div",{className:"grid md:grid-cols-2 gap-6",children:e.map(e=>{var t;return(0,s.jsxs)("div",{className:"card hover:shadow-lg transition-all",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:e.title}),(0,s.jsx)("span",{className:"badge ".concat(e.isPublished?"badge-success":"badge-red"),children:e.isPublished?"Published":"Draft"})]}),(0,s.jsx)("p",{className:"text-neutral-medium text-sm mb-4",children:e.description})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-neutral-medium",children:"Difficulty"}),(0,s.jsx)("p",{className:"font-semibold capitalize",children:e.difficulty})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-neutral-medium",children:"Duration"}),(0,s.jsxs)("p",{className:"font-semibold",children:[e.estimatedCompletionTime," min"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-neutral-medium",children:"Chapters"}),(0,s.jsx)("p",{className:"font-semibold",children:(null===(t=e.chapters)||void 0===t?void 0:t.length)||0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-neutral-medium",children:"AI Enabled"}),(0,s.jsx)("p",{className:"font-semibold",children:e.aiInteractionEnabled?"✅ Yes":"❌ No"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-4 border-t border-neutral-border",children:[(0,s.jsxs)(n.default,{href:"/admin/modules/".concat(e._id),className:"flex-1 flex items-center justify-center gap-2 text-primary-red hover:bg-primary-lightRed p-2 rounded transition",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4"}),"Manage Chapters"]}),(0,s.jsxs)("button",{type:"button",onClick:()=>{y(e),j({title:e.title||"",description:e.description||"",difficulty:e.difficulty||"beginner",estimatedCompletionTime:e.estimatedCompletionTime||60,aiQuestionsPerChapter:"number"==typeof e.aiQuestionsPerChapter?e.aiQuestionsPerChapter:10}),g(!0)},className:"flex-1 flex items-center justify-center gap-2 text-primary-red hover:bg-primary-lightRed p-2 rounded transition",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),"Edit"]}),(0,s.jsx)("button",{onClick:()=>k(e._id),className:"flex-1 flex items-center justify-center gap-2 text-semantic-error hover:bg-red-50 p-2 rounded transition",children:(0,s.jsx)(u.Z,{className:"w-4 h-4"})})]})]},e._id)})}),0===e.length&&(0,s.jsx)("div",{className:"card text-center",children:(0,s.jsx)("p",{className:"text-neutral-medium",children:"No modules yet. Create one to get started!"})})]})}},23930:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(57437);function r(e){let{size:t="md",message:a="Loading..."}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsx)("div",{className:"".concat({sm:"w-6 h-6",md:"w-12 h-12",lg:"w-16 h-16"}[t]," border-4 border-neutral-light border-t-primary-red rounded-full animate-spin")}),a&&(0,s.jsx)("p",{className:"mt-4 text-neutral-medium",children:a})]})}},32617:function(e,t,a){"use strict";a.d(t,{Gg:function(){return c},I8:function(){return l},SA:function(){return m},Yl:function(){return u},mG:function(){return o},qz:function(){return d}});var s=a(83464),r=a(9818);let n="http://localhost:5006/api",i=s.Z.create({baseURL:n,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let t=(0,r.bW)();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e.data,async e=>{var t,a;let l=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===403&&!l._retry){l._retry=!0;let e=(0,r.YV)();if(e)try{let t=await s.Z.post("".concat(n,"/auth/refresh"),{refreshToken:e});return(0,r.uB)(t.data.accessToken),l.headers.Authorization="Bearer ".concat(t.data.accessToken),i(l)}catch(e){return(0,r.H6)(),window.location.href="/login",Promise.reject(e)}}return Promise.reject((null===(a=e.response)||void 0===a?void 0:a.data)||e.message)});let l={signup:e=>i.post("/auth/signup",e),login:e=>i.post("/auth/login",e),refreshToken:e=>i.post("/auth/refresh",{refreshToken:e}),getProfile:()=>i.get("/auth/profile"),updateProfile:e=>i.put("/auth/profile",e)},o={initiatePayment:()=>i.post("/payment/initiate"),verifyPayment:e=>i.post("/payment/verify",e),getPaymentStatus:()=>i.get("/payment/status")},d={getAll:()=>i.get("/modules"),getById:e=>i.get("/modules/".concat(e)),getChapter:(e,t)=>i.get("/modules/".concat(e,"/chapters/").concat(t)),create:e=>i.post("/modules",e),update:(e,t)=>i.put("/modules/".concat(e),t),delete:e=>i.delete("/modules/".concat(e)),publish:e=>i.post("/modules/".concat(e,"/publish")),createChapter:(e,t)=>i.post("/modules/".concat(e,"/chapters"),t),updateChapter:(e,t,a)=>i.put("/modules/".concat(e,"/chapters/").concat(t),a),deleteChapter:(e,t)=>i.delete("/modules/".concat(e,"/chapters/").concat(t)),reorderChapters:(e,t)=>i.post("/modules/".concat(e,"/reorder-chapters"),t)},c={sendMessage:(e,t,a)=>i.post("/chat/".concat(e,"/chapters/").concat(t,"/message"),{message:a}),getChatHistory:(e,t)=>i.get("/chat/".concat(e,"/chapters/").concat(t,"/history")),completeChapter:(e,t)=>i.post("/chat/".concat(e,"/chapters/").concat(t,"/complete")),getSSI:()=>i.get("/chat/ssi"),getReport:()=>i.get("/chat/report"),getStudentChats:e=>i.get("/chat/admin/student/".concat(e,"/chats")),overrideSSI:(e,t)=>i.put("/chat/admin/chat/".concat(e,"/override-ssi"),t),sendGlobalMessage:e=>i.post("/chat/global/message",{message:e}),getGlobalHistory:()=>i.get("/chat/global/history")},u={saveDraft:e=>i.post("/submission/draft",e),submit:e=>i.post("/submission/submit",e,{headers:{"Content-Type":"multipart/form-data"}}),get:()=>i.get("/submission"),update:(e,t)=>i.put("/submission/".concat(e),t),getAll:e=>i.get("/submission/admin/all",{params:e}),getDetails:e=>i.get("/submission/admin/".concat(e)),score:(e,t)=>i.put("/submission/admin/".concat(e,"/score"),t),downloadFile:(e,t)=>i.get("/submission/admin/".concat(e,"/download/").concat(t))},m={getDashboard:()=>i.get("/admin/dashboard"),getStudents:e=>i.get("/admin/students",{params:e}),getStudentDetail:e=>i.get("/admin/students/".concat(e)),updateStudentStatus:(e,t)=>i.put("/admin/students/".concat(e),t),tagStudent:(e,t)=>i.post("/admin/students/".concat(e,"/tag"),t),getAnalytics:()=>i.get("/admin/analytics"),exportStudents:()=>i.get("/admin/export/students"),getSchoolSlugs:()=>i.get("/admin/slugs"),createSchoolSlug:e=>i.post("/admin/slugs",e),updateSchoolSlug:(e,t)=>i.put("/admin/slugs/".concat(e),t),deleteSchoolSlug:e=>i.delete("/admin/slugs/".concat(e)),getStudentsBySlug:e=>i.get("/admin/slugs/".concat(e,"/students"))}},9818:function(e,t,a){"use strict";a.d(t,{$8:function(){return h},GJ:function(){return g},H6:function(){return p},PR:function(){return u},YV:function(){return d},av:function(){return m},bW:function(){return l},dE:function(){return f},uB:function(){return o},zI:function(){return c}});var s=a(64131);let r="future_titans_token",n="future_titans_refresh_token",i="future_titans_user",l=()=>s.Z.get(r)||localStorage.getItem(r),o=e=>{s.Z.set(r,e,{expires:.625}),localStorage.setItem(r,e)},d=()=>s.Z.get(n)||localStorage.getItem(n),c=e=>{s.Z.set(n,e,{expires:7}),localStorage.setItem(n,e)},u=()=>{let e=localStorage.getItem(i);return e?JSON.parse(e):null},m=e=>{localStorage.setItem(i,JSON.stringify(e))},p=()=>{s.Z.remove(r),localStorage.removeItem(r),localStorage.removeItem(n),localStorage.removeItem(i),s.Z.remove(n)},h=()=>!!l(),g=()=>{let e=u();return(null==e?void 0:e.role)==="admin"},f=()=>{let e=u();return(null==e?void 0:e.role)==="student"}},15048:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8301).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6850:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8301).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},16325:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8301).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},53739:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8301).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[825,589,971,117,744],function(){return e(e.s=53723)}),_N_E=e.O()}]);