(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[331],{66215:function(e,t,s){Promise.resolve().then(s.bind(s,2754))},2754:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(57437),r=s(2265),n=s(32617),l=s(23930),o=s(16325),i=s(31338),c=s(8301);let d=(0,c.Z)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),u=(0,c.Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var m=s(53739);function p(){let[e,t]=(0,r.useState)([]),[s,c]=(0,r.useState)(!0),[p,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null),[f,b]=(0,r.useState)({name:"",slug:"",description:"",price:499,isActive:!0});(0,r.useEffect)(()=>{v()},[]);let v=async()=>{try{c(!0);let e=await n.SA.getSchoolSlugs();t(e.map(e=>e.slug?e:e._doc?{...e._doc,studentCount:e.studentCount||0}:e))}catch(e){console.error("Failed to fetch school slugs:",e)}finally{c(!1)}},y=e=>{x(e),b({name:e.name,slug:e.slug,description:e.description||"",price:e.price,isActive:e.isActive}),h(!0)},j=async e=>{if(e.preventDefault(),!f.name||!f.slug||!f.price){alert("Name, slug and price are required.");return}try{g?await n.SA.updateSchoolSlug(g._id,{...f,price:Number(f.price)}):await n.SA.createSchoolSlug({...f,price:Number(f.price)}),h(!1),x(null),await v()}catch(e){console.error("Failed to save school slug:",e),alert((null==e?void 0:e.error)||"Failed to save school slug")}},S=async e=>{if(confirm('Delete slug "'.concat(e.slug,'"? This will not remove existing students, only the slug config.')))try{await n.SA.deleteSchoolSlug(e._id),await v()}catch(e){console.error("Failed to delete school slug:",e),alert("Failed to delete")}},N=e=>"".concat(window.location.origin,"/signup?slug=").concat(encodeURIComponent(e));return s?(0,a.jsx)(l.Z,{message:"Loading school slugs..."}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold gradient-text",children:"School Slugs & Cohorts"}),(0,a.jsxs)("button",{onClick:()=>{x(null),b({name:"",slug:"",description:"",price:499,isActive:!0}),h(!0)},className:"flex items-center gap-2 bg-primary-red text-white px-4 py-2 rounded-lg hover:bg-primary-darkRed transition",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),"New School Slug"]})]}),p&&(0,a.jsxs)("div",{className:"card mb-8",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-4",children:g?"Edit School Slug":"Create School Slug"}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"School Name *"}),(0,a.jsx)("input",{type:"text",value:f.name,onChange:e=>b({...f,name:e.target.value}),className:"w-full px-3 py-2 border border-neutral-border rounded-lg",placeholder:"e.g. Delhi Public School - Indiranagar"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Slug (URL-safe, lowercase) *",(0,a.jsx)("span",{className:"block text-xs text-neutral-medium",children:"Used in signup link: /signup?slug=<slug>"})]}),(0,a.jsx)("input",{type:"text",value:f.slug,onChange:e=>b({...f,slug:e.target.value.toLowerCase().replace(/\s+/g,"-")}),className:"w-full px-3 py-2 border border-neutral-border rounded-lg",placeholder:"e.g. dps-indiranagar-2025"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Discounted Price (₹) *",(0,a.jsx)("span",{className:"block text-xs text-neutral-medium",children:"Students registering via this slug will pay this price (default is ₹999)."})]}),(0,a.jsx)("input",{type:"number",min:0,value:f.price,onChange:e=>b({...f,price:Number(e.target.value)}),className:"w-full px-3 py-2 border border-neutral-border rounded-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Status"}),(0,a.jsxs)("select",{value:f.isActive?"active":"inactive",onChange:e=>b({...f,isActive:"active"===e.target.value}),className:"w-full px-3 py-2 border border-neutral-border rounded-lg",children:[(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Description (optional)"}),(0,a.jsx)("textarea",{value:f.description,onChange:e=>b({...f,description:e.target.value}),className:"w-full px-3 py-2 border border-neutral-border rounded-lg h-20",placeholder:"Notes about this school/cohort or special terms."})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{h(!1),x(null)},className:"px-4 py-2 bg-neutral-light text-neutral-dark rounded-lg hover:bg-neutral-border transition",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-primary-red text-white rounded-lg hover:bg-primary-darkRed transition",children:g?"Save Changes":"Create Slug"})]})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Active School Slugs"}),0===e.length?(0,a.jsx)("p",{className:"text-neutral-medium text-sm",children:"No school slugs yet. Create one to get started."}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"border border-neutral-border rounded-lg p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h4",{className:"font-bold text-lg",children:e.name}),!e.isActive&&(0,a.jsx)("span",{className:"badge badge-red text-xs",children:"Inactive"})]}),(0,a.jsxs)("p",{className:"text-sm text-neutral-medium mb-1",children:["Slug: ",(0,a.jsx)("span",{className:"font-mono",children:e.slug})]}),(0,a.jsxs)("p",{className:"text-sm text-neutral-medium mb-1",children:["Price: ",(0,a.jsxs)("span",{className:"font-semibold",children:["₹",e.price]})," (default: ₹999)"]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-neutral-medium line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-xs text-neutral-medium",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(i.Z,{className:"w-3 h-3"}),e.studentCount||0," students"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>{let t=N(e.slug);navigator.clipboard.writeText(t),alert("Registration link copied to clipboard")},className:"flex items-center gap-1 text-primary-red hover:text-primary-darkRed transition",children:[(0,a.jsx)(d,{className:"w-3 h-3"}),"Copy signup link"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>y(e),className:"flex items-center gap-1 px-3 py-2 text-primary-red hover:bg-primary-lightRed rounded-lg transition text-sm",children:[(0,a.jsx)(u,{className:"w-4 h-4"}),"Edit"]}),(0,a.jsxs)("button",{onClick:()=>S(e),className:"flex items-center gap-1 px-3 py-2 text-semantic-error hover:bg-red-50 rounded-lg transition text-sm",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"Delete"]})]})]},e._id))})]})]})}},23930:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(57437);function r(e){let{size:t="md",message:s="Loading..."}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"".concat({sm:"w-6 h-6",md:"w-12 h-12",lg:"w-16 h-16"}[t]," border-4 border-neutral-light border-t-primary-red rounded-full animate-spin")}),s&&(0,a.jsx)("p",{className:"mt-4 text-neutral-medium",children:s})]})}},32617:function(e,t,s){"use strict";s.d(t,{Gg:function(){return d},I8:function(){return o},SA:function(){return m},Yl:function(){return u},mG:function(){return i},qz:function(){return c}});var a=s(83464),r=s(9818);let n="http://localhost:5006/api",l=a.Z.create({baseURL:n,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=(0,r.bW)();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e.data,async e=>{var t,s;let o=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===403&&!o._retry){o._retry=!0;let e=(0,r.YV)();if(e)try{let t=await a.Z.post("".concat(n,"/auth/refresh"),{refreshToken:e});return(0,r.uB)(t.data.accessToken),o.headers.Authorization="Bearer ".concat(t.data.accessToken),l(o)}catch(e){return(0,r.H6)(),window.location.href="/login",Promise.reject(e)}}return Promise.reject((null===(s=e.response)||void 0===s?void 0:s.data)||e.message)});let o={signup:e=>l.post("/auth/signup",e),login:e=>l.post("/auth/login",e),refreshToken:e=>l.post("/auth/refresh",{refreshToken:e}),getProfile:()=>l.get("/auth/profile"),updateProfile:e=>l.put("/auth/profile",e)},i={initiatePayment:()=>l.post("/payment/initiate"),verifyPayment:e=>l.post("/payment/verify",e),getPaymentStatus:()=>l.get("/payment/status")},c={getAll:()=>l.get("/modules"),getById:e=>l.get("/modules/".concat(e)),getChapter:(e,t)=>l.get("/modules/".concat(e,"/chapters/").concat(t)),create:e=>l.post("/modules",e),update:(e,t)=>l.put("/modules/".concat(e),t),delete:e=>l.delete("/modules/".concat(e)),publish:e=>l.post("/modules/".concat(e,"/publish")),createChapter:(e,t)=>l.post("/modules/".concat(e,"/chapters"),t),updateChapter:(e,t,s)=>l.put("/modules/".concat(e,"/chapters/").concat(t),s),deleteChapter:(e,t)=>l.delete("/modules/".concat(e,"/chapters/").concat(t)),reorderChapters:(e,t)=>l.post("/modules/".concat(e,"/reorder-chapters"),t)},d={sendMessage:(e,t,s)=>l.post("/chat/".concat(e,"/chapters/").concat(t,"/message"),{message:s}),getChatHistory:(e,t)=>l.get("/chat/".concat(e,"/chapters/").concat(t,"/history")),completeChapter:(e,t)=>l.post("/chat/".concat(e,"/chapters/").concat(t,"/complete")),getSSI:()=>l.get("/chat/ssi"),getReport:()=>l.get("/chat/report"),getStudentChats:e=>l.get("/chat/admin/student/".concat(e,"/chats")),overrideSSI:(e,t)=>l.put("/chat/admin/chat/".concat(e,"/override-ssi"),t),sendGlobalMessage:e=>l.post("/chat/global/message",{message:e}),getGlobalHistory:()=>l.get("/chat/global/history")},u={saveDraft:e=>l.post("/submission/draft",e),submit:e=>l.post("/submission/submit",e,{headers:{"Content-Type":"multipart/form-data"}}),get:()=>l.get("/submission"),update:(e,t)=>l.put("/submission/".concat(e),t),getAll:e=>l.get("/submission/admin/all",{params:e}),getDetails:e=>l.get("/submission/admin/".concat(e)),score:(e,t)=>l.put("/submission/admin/".concat(e,"/score"),t),downloadFile:(e,t)=>l.get("/submission/admin/".concat(e,"/download/").concat(t))},m={getDashboard:()=>l.get("/admin/dashboard"),getStudents:e=>l.get("/admin/students",{params:e}),getStudentDetail:e=>l.get("/admin/students/".concat(e)),updateStudentStatus:(e,t)=>l.put("/admin/students/".concat(e),t),tagStudent:(e,t)=>l.post("/admin/students/".concat(e,"/tag"),t),getAnalytics:()=>l.get("/admin/analytics"),exportStudents:()=>l.get("/admin/export/students"),getSchoolSlugs:()=>l.get("/admin/slugs"),createSchoolSlug:e=>l.post("/admin/slugs",e),updateSchoolSlug:(e,t)=>l.put("/admin/slugs/".concat(e),t),deleteSchoolSlug:e=>l.delete("/admin/slugs/".concat(e)),getStudentsBySlug:e=>l.get("/admin/slugs/".concat(e,"/students"))}},9818:function(e,t,s){"use strict";s.d(t,{$8:function(){return h},GJ:function(){return g},H6:function(){return p},PR:function(){return u},YV:function(){return c},av:function(){return m},bW:function(){return o},dE:function(){return x},uB:function(){return i},zI:function(){return d}});var a=s(64131);let r="future_titans_token",n="future_titans_refresh_token",l="future_titans_user",o=()=>a.Z.get(r)||localStorage.getItem(r),i=e=>{a.Z.set(r,e,{expires:.625}),localStorage.setItem(r,e)},c=()=>a.Z.get(n)||localStorage.getItem(n),d=e=>{a.Z.set(n,e,{expires:7}),localStorage.setItem(n,e)},u=()=>{let e=localStorage.getItem(l);return e?JSON.parse(e):null},m=e=>{localStorage.setItem(l,JSON.stringify(e))},p=()=>{a.Z.remove(r),localStorage.removeItem(r),localStorage.removeItem(n),localStorage.removeItem(l),a.Z.remove(n)},h=()=>!!o(),g=()=>{let e=u();return(null==e?void 0:e.role)==="admin"},x=()=>{let e=u();return(null==e?void 0:e.role)==="student"}},8301:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var l=(e,t)=>{let s=(0,a.forwardRef)((s,l)=>{let{color:o="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:d,children:u,...m}=s;return(0,a.createElement)("svg",{ref:l,...r,width:i,height:i,stroke:o,strokeWidth:d?24*Number(c)/Number(i):c,className:"lucide lucide-".concat(n(e)),...m},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...(Array.isArray(u)?u:[u])||[]])});return s.displayName="".concat(e),s}},16325:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8301).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},53739:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8301).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},31338:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8301).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[825,971,117,744],function(){return e(e.s=66215)}),_N_E=e.O()}]);